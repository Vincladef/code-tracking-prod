<!doctype html>
<html lang="fr">
<head>
Â  <meta charset="utf-8" />
Â  <meta name="viewport" content="width=device-width, initial-scale=1" />
Â  <title>Tracker dâ€™habitudes & Pratique dÃ©libÃ©rÃ©e</title>
Â  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ”¥</text></svg>">
Â  <script src="https://cdn.tailwindcss.com"></script>
Â  <style>
Â  Â  button {
Â  Â  Â  all: unset;
Â  Â  Â  display: inline-block;
Â  Â  Â  cursor: pointer;
Â  Â  }
Â  Â  :root{
Â  Â  Â  color-scheme: dark light;
Â  Â  Â  --bg:#0b0f14; --panel:#101823; --muted:#94a3b8; --text:#e5e7eb; --accent:#60a5fa;
Â  Â  Â  --ok:#22c55e; --warn:#f59e0b; --bad:#ef4444; --border:#1f2937; --soft:#0e1621;
Â  Â  Â  --shadow: 0 10px 25px rgba(0,0,0,.25), 0 2px 6px rgba(0,0,0,.2);
Â  Â  }
Â  Â  *{box-sizing:border-box}
Â  Â  html,body{height:100%}
Â  Â  body{
Â  Â  Â  margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
Â  Â  Â  color:var(--text); background:linear-gradient(180deg, var(--bg), var(--soft));
Â  Â  }
Â  Â  
Â  Â  /* petit tiroir de logs on-screen si debug */
Â  Â  #debug-drawer{
Â  Â  Â  position:fixed; right:10px; bottom:10px; width:360px; max-height:45vh; overflow:auto;
Â  Â  Â  background:rgba(8,12,18,.9); border:1px solid var(--border); border-radius:12px; padding:10px;
Â  Â  Â  box-shadow: var(--shadow); font-size:12px; color:#cbd5e1; display:none;
Â  Â  }
Â  Â  #debug-drawer.visible{ display:block }
Â  Â  #debug-drawer pre{ margin:0; white-space:pre-wrap }
Â  </style>
</head>
<body>
<header class="sticky top-0 z-10 bg-gray-900/80 backdrop-blur border-b border-gray-700">
Â  <div class="max-w-6xl mx-auto flex items-center justify-between px-4 py-3">
Â  Â  <h1 class="text-xl font-semibold">Tracker â€” <span class="text-sky-400">Habitudes</span> & <span class="text-sky-400">Pratique</span></h1>
Â  Â  <nav class="flex gap-2 flex-wrap">
Â  Â  Â  <button class="px-3 py-1 rounded-lg bg-gray-800 border border-gray-600 text-sm hover:bg-gray-700" data-route="#/dashboard">Tableau de bord</button>
Â  Â  Â  <button class="px-3 py-1 rounded-lg bg-gray-800 border border-gray-600 text-sm hover:bg-gray-700" data-route="#/daily">Mode Journalier</button>
Â  Â  Â  <button class="px-3 py-1 rounded-lg bg-gray-800 border border-gray-600 text-sm hover:bg-gray-700" data-route="#/practice">Pratique DÃ©libÃ©rÃ©e</button>
Â  Â  Â  <button class="px-3 py-1 rounded-lg bg-gray-800 border border-gray-600 text-sm hover:bg-gray-700" data-route="#/goals">Objectifs</button>
Â  Â  Â  <button class="px-3 py-1 rounded-lg bg-gray-800 border border-gray-600 text-sm hover:bg-gray-700" data-route="#/history">Historique</button>
Â  Â  Â  <button class="px-3 py-1 rounded-lg bg-gray-800 border border-gray-600 text-sm hover:bg-gray-700" data-route="#/admin">Admin</button>
Â  Â  </nav>
Â  </div>
</header>

<main class="max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-[280px,1fr] gap-6 p-4">
Â  <aside class="bg-gray-900 border border-gray-700 rounded-xl p-4 shadow-lg space-y-4">
Â  Â  <div class="space-y-2">
Â  Â  Â  <button class="w-full px-4 py-2 bg-sky-600 text-white rounded-lg shadow hover:bg-sky-500" id="btn-new-session">+ Nouvelle session</button>
Â  Â  Â  <button class="w-full px-4 py-2 bg-gray-800 border border-gray-600 rounded-lg hover:bg-gray-700" id="btn-add-consigne">+ Ajouter une consigne</button>
Â  Â  Â  <button class="w-full px-4 py-2 bg-gray-800 border border-gray-600 rounded-lg hover:bg-gray-700" id="btn-add-goal">+ CrÃ©er un objectif</button>
Â  Â  </div>
Â  Â  <hr style="border-color:#1f2937; margin:12px 0;">
Â  Â  <div class="space-y-4">
Â  Â  Â  <div>
Â  Â  Â  Â  <label class="block text-sm text-gray-400">Votre profil</label>
Â  Â  Â  Â  <div id="profile-box" class="p-3 bg-gray-800 border border-gray-700 rounded-lg text-gray-400">Chargementâ€¦</div>
Â  Â  Â  </div>
Â  Â  Â  <div>
Â  Â  Â  Â  <label class="block text-sm text-gray-400">CatÃ©gories</label>
Â  Â  Â  Â  <div id="category-box" class="p-3 bg-gray-800 border border-gray-700 rounded-lg"></div>
Â  Â  Â  </div>
Â  Â  </div>
Â  </aside>

Â  <section class="bg-gray-900 border border-gray-700 rounded-xl p-4 shadow-lg" id="view">
Â  Â  <div id="view-root">Chargementâ€¦</div>
Â  </section>
</main>

<footer class="text-center text-gray-500 text-sm py-6">
Â  V1 â€” GitHub Pages + Firebase Firestore (auth anonyme). Design minimal. Â©
</footer>

<div id="debug-drawer"></div>
<script type="module">
Â  import { D } from "./schema.js";
Â  const drawer = document.getElementById("debug-drawer");
Â  if (D.on && drawer){
Â  Â  drawer.classList.add("visible");
Â  Â  const o = console.info;
Â  Â  console.info = (...args) => { o.apply(console, args); const pre=document.createElement("pre"); pre.textContent=args.map(a=>typeof a==='string'?a:JSON.stringify(a)).join(' '); drawer.appendChild(pre); };
Â  }
</script>

<script type="module">
Â  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
Â  import { getFirestore } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";
Â  import { initApp } from "./app.js";

Â  const firebaseConfig = {
Â  Â  apiKey: "AIzaSyAQcvZ9a2j4MHF04RjMHIey0R_iwnjZf4o",
Â  Â  authDomain: "tracking-d-habitudes.firebaseapp.com",
Â  Â  projectId: "tracking-d-habitudes",
Â  Â  storageBucket: "tracking-d-habitudes.firebasestorage.app",
Â  Â  messagingSenderId: "739389871966",
Â  Â  appId: "1:739389871966:web:684e26dbdfb0c0a69221cf",
Â  Â  measurementId: "G-ZPHWB5DKWF"
Â  };

Â  const app = initializeApp(firebaseConfig);
Â  const db = getFirestore(app);

Â  function getUidFromHash() {
Â  Â  const m = location.hash.match(/^#\/u\/([^/?#]+)/);
Â  Â  return m ? m[1] : null;
Â  }

Â  function boot() {
Â  Â  const uid = getUidFromHash();
Â  Â  if (!uid) {
Â  Â  Â  // Si pas d'UID -> aller direct en mode admin
Â  Â  Â  location.hash = "#/admin";
Â  Â  Â  return;
Â  Â  }
Â  Â  initApp({ app, db, user: { uid } });
Â  }

Â  window.addEventListener("hashchange", boot);
Â  boot();
</script>

<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
</body>
</html>